# This workflow is responsible for releasing the helm chart:
# - Updates the version attribute in the Chart.yml file
# - Commit the changes
# - Creates a new product tag for the release

name: Helm Release

on:
  workflow_run:
    workflows:
      - "Backup Component Build"
      - "Cleaner Component Build"
      - "Drone Authorizer Component Build"
      - "Gitea Oauth2 Setup Component Build"
      - "KDLServer Application Build"
    types:
      - completed


jobs:
  helm-release:
    uses: konstellation-io/github-workflows/.github/workflows/helm-release.yaml@v1.0.0
    with:
      chart_name: kdl-server
    secrets:
      github_token: ${{ secrets.GITHUB_TOKEN }}

