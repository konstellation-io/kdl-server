schema: '2.0'
stages:
  check-inputs:
    cmd: python src/pipe/check_inputs.py
    deps:
    - path: inputs/arxiv-metadata-oai-snapshot.json
      md5: 00b1b2d81516db5b87c4af81bc2d9f06
      size: 2862793190
    - path: inputs/links-between-papers-and-code.json
      md5: 32c5d45c85a4d8aebb5269598c1208f4
      size: 33866055
    - path: inputs/papers-with-abstracts.json
      md5: 553834169476a4ef4452f61f00bfbe81
      size: 436693842
    - path: src/pipe/check_inputs.py
      md5: a636c77345c15d355f79c44671eca49d
      size: 3094
  create-dataset:
    cmd: python src/pipe/create_dataset.py
    deps:
    - path: inputs/arxiv-metadata-oai-snapshot.json
      md5: 00b1b2d81516db5b87c4af81bc2d9f06
      size: 2862793190
    - path: inputs/links-between-papers-and-code.json
      md5: 32c5d45c85a4d8aebb5269598c1208f4
      size: 33866055
    - path: inputs/papers-with-abstracts.json
      md5: 553834169476a4ef4452f61f00bfbe81
      size: 436693842
    - path: src/pipe/create_dataset.py
      md5: 0b60cdeb26dacb7f54d6604439d64050
      size: 7880
    outs:
    - path: assets/dataset.pkl.gz
      md5: 56def90261879b789da7639fecc6559a
      size: 228999203
  compute-vectors:
    cmd: python src/pipe/compute_vectors.py
    deps:
    - path: assets/dataset.pkl.gz
      md5: 56def90261879b789da7639fecc6559a
      size: 228999203
    - path: assets/model
      md5: 35cfb008c9a2450378809a0880292f09.dir
      size: 268217080
      nfiles: 5
    - path: src/pipe/compute_vectors.py
      md5: d128a73dc42f9f9ac5c1aa8cb9cd7690
      size: 8557
    outs:
    - path: assets/vectors.faiss
      md5: 91d92bcb1bd3baad2f5c2c9300a567e5
      size: 1564044333
  compute-topics:
    cmd: python src/pipe/compute_topics.py
    deps:
    - path: assets/dataset.pkl.gz
      md5: 56def90261879b789da7639fecc6559a
      size: 228999203
    - path: inputs/topics_model
      md5: 6fdd56fa496047913eee00bef84393c1.dir
      size: 271127159
      nfiles: 4
    - path: src/pipe/compute_topics.py
      md5: a0ef2fab224ef4c2123ff3f9a03202a9
      size: 8995
    outs:
    - path: assets/topics.pkl.gz
      md5: 332b77cceb5af824dbe517a70d6dab2a
      size: 11214530
